@model TeamSpark.AzureDay.WebSite.Host.Models.Profile.RegistrationModel
<div class="boxedcontent">

	@Html.Action("Header", "Layout")

	<div class="container">
		<div class="row">
			<div class="col-md-12">
				
				<div>
					&nbsp;
				</div>

				<h1>Регистрация на <span class='colortext'>AZUREday</span></h1>

				<div style="padding-bottom: 25px;">
					Для того, чтобы зарегистрироваться на AZUREday, заполните форму, приведенную ниже.
				</div>

				<form method="POST" data-bind="submit: showModal">

					<div class="input-group myInputGroupdivider">
						<span class="input-group-addon" style="width: 150px;">Email</span>
						<input class="form-control" name="email" data-bind="textInput: email" placeholder="Email" style="width: 250px;" />
					</div>

					<div class="input-group myInputGroupdivider">
						<span class="input-group-addon" style="width: 150px;">Пароль</span>
						<input class="form-control" name="password" type="password" data-bind="textInput: password" placeholder="Пароль" style="width: 250px;" />
					</div>

					<div class="input-group myInputGroupdivider">
						<span class="input-group-addon" style="width: 150px;">Повторите пароль</span>
						<input class="form-control" type="password" data-bind="textInput: password2" placeholder="Пароль еще раз" style="width: 250px;" />
					</div>

					<div style="width: 400px;" class="alert alert-danger" role="alert" data-bind="style: { display: isPasswordValid() ? 'none' : 'block' }">Пароли должны совпадать.</div>
					<div style="width: 400px;" class="alert alert-danger" role="alert" data-bind="style: { display: isPasswordLengthValid() && isPasswordLength2Valid() ? 'none' : 'block' }">Минимальная длина пароля 6 символов.</div>

					<div class="input-group myInputGroupdivider">
						<span class="input-group-addon" style="width: 150px;">Имя</span>
						<input class="form-control" name="firstName" data-bind="textInput: fName" placeholder="Имя" style="width: 250px;" />
					</div>
					<div class="input-group myInputGroupdivider">
						<span class="input-group-addon" style="width: 150px;">Фамилия</span>
						<input class="form-control" name="lastName" data-bind="textInput: lName" placeholder="Фамилия" style="width: 250px;" />
					</div>
					<div class="input-group myInputGroupdivider">
						<span class="input-group-addon" style="width: 150px;">Компания</span>
						<input class="form-control" name="company" data-bind="textInput: company" placeholder="Компания" style="width: 250px;" />
					</div>

					<button class="btn btn-primary" type="submit" data-bind="enable: isModelValid">Зарегистрироваться</button>

					<div style="width: 400px; margin-top: 15px;" class="alert alert-warning" data-bind="style: { display: isModelValid() ? 'none' : 'block' }">Все поля обязательны для заполнения</div>
						
				</form>

			</div>
		</div>
	</div>

	@Html.Action("Footer", "Layout")

</div>


	@Html.Partial("_ModalWait")

	@section Scripts
{
		@Scripts.Render("~/cdn/knockout/js")

		<script>
			$(document).ready(function () {
				var registrationModel = {
					email: ko.observable(''),
					password: ko.observable(''),
					password2: ko.observable(''),
					fName: ko.observable(''),
					lName: ko.observable(''),
					company: ko.observable('')
				};

				registrationModel.isPasswordLengthValid = ko.computed(function () {
					var pwd = registrationModel.password();
					return !!pwd && pwd.length >= 6;
				});

				registrationModel.isPasswordLength2Valid = ko.computed(function () {
					var pwd = registrationModel.password2();
					return !!pwd && pwd.length >= 6;
				});

				registrationModel.isPasswordValid = ko.computed(function () {
					var pwd = registrationModel.password();
					var pwd2 = registrationModel.password2();

					return pwd === pwd2 && registrationModel.isPasswordLengthValid() && registrationModel.isPasswordLength2Valid();
				});

				registrationModel.isModelValid = ko.computed(function () {
					var email = registrationModel.email();
					var fName = registrationModel.fName();
					var lName = registrationModel.lName();
					var company = registrationModel.company();

					return registrationModel.isPasswordValid() && !!email && !!fName && !!lName && !!company;
				});

				registrationModel.showModal = function () {
					setTimeout(function () {
						modal.showModal();
					});
					return true;
				}

				ko.applyBindings(registrationModel);
			});
		</script>
	}
