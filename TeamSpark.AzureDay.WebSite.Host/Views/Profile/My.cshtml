@model TeamSpark.AzureDay.WebSite.Host.Models.Profile.MyProfileModel

<div class="boxedcontent">
	@Html.Action("Header", "Layout")

	<div class="container">
		<div class="row">
			<div class="col-md-12">

				<div>
					&nbsp;
				</div>

				<h1>Личный кабинет участника <span class='colortext'>AZUREday</span></h1>

				<form method="POST" data-bind="submit: showModal">

					<div class="input-group myInputGroupdivider">
						<span class="input-group-addon" style="width: 150px;">Email</span>
						<input class="form-control" name="email" readonly="readonly" disabled="disabled" value="@Model.Email" style="width: 250px;" />
					</div>
					<div class="input-group myInputGroupdivider">
						<span class="input-group-addon" style="width: 150px;">Имя</span>
						<input class="form-control" name="firstName" data-bind="textInput: fName" placeholder="Имя" value="@Model.FirstName" style="width: 250px;" />
					</div>
					<div class="input-group myInputGroupdivider">
						<span class="input-group-addon" style="width: 150px;">Фамилия</span>
						<input class="form-control" name="lastName" data-bind="textInput: lName" placeholder="Фамилия" value="@Model.LastName" style="width: 250px;" />
					</div>
					<div class="input-group myInputGroupdivider">
						<span class="input-group-addon" style="width: 150px;">Компания</span>
						<input class="form-control" name="company" data-bind="textInput: company" placeholder="Компания" value="@Model.Company" style="width: 250px;" />
					</div>

						<button class="btn btn-primary" type="submit" data-bind="enable: isModelValid">Сохранить</button>

					<div style="width: 400px; margin-top: 15px;" class="alert alert-warning" data-bind="style: { display: isModelValid() ? 'none' : 'block' }">Все поля обязательны для заполнения</div>

</form>

				<div style="padding-top: 25px;">
					<p>
						Продажа билетов будет открыта в ближайшие дни.
					</p>
					<p>
						Если вы успели зарегистрироваться и видите это сообщение, то мы подарим вам <span class='colortext'>промокод на 10% скидки</span> на один билет на конференцию, как только будет открыта продажа билетов.
</p>

				</div>
			</div>
		</div>
	</div>

	@Html.Action("Footer", "Layout")


	@Html.Partial("_ModalWait")

	@section Scripts
{
		@Scripts.Render("~/cdn/knockout/js")

		<script>
			$(document).ready(function () {
				var profileModel = {
					fName: ko.observable('@Model.FirstName'),
					lName: ko.observable('@Model.LastName'),
					company: ko.observable('@Model.Company')
				};

				profileModel.isModelValid = ko.computed(function () {
					var fName = profileModel.fName();
					var lName = profileModel.lName();
					var company = profileModel.company();

					return !!fName && !!lName && !!company;
				});

				profileModel.showModal = function () {
					setTimeout(function () {
						modal.showModal();
					});
					return true;
				}

				ko.applyBindings(profileModel);
			});
		</script>
	}

</div><!-- end boxedcontent -->
